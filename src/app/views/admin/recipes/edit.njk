{% extends "layout.njk" %}

{% block content %}
  <div class="top-headerEdit">
    <h1>Editando Receita</h1>

    <form 
      id="form-delete" 
      action="/admin/recipes/index/{{ recipes.id }}?_method=DELETE" 
      method="POST"
    >
      <input type="hidden" name="id" value={{ recipe.id }}>
        <button type="submit">Deletar</button>
      </form>
      <button form="update" type="submit">Salvar Receita</button>
    </div>

    <form
      id="update"
      method="POST"
      action="/admin/recipes/index/{{ recipes.id }}/edit?_method=PUT"
    >      

      {% include 'admin/recipes/fields.njk' %}
      <input type="hidden" name="id" value={{ recipe.id }}></form>
      <script>
        const formDelete = document.querySelector("#form-delete")
        formDelete.addEventListener("submit", function (event) {
          const confirmation = confirm("Deseja Deletar?")
          if (! confirmation) {
            event.preventDefault()
          }
        })
      </script>
    {% endblock content %}